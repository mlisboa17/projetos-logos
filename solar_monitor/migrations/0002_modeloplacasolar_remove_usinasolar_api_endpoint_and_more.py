# Generated by Django 5.2.7 on 2025-11-26 00:10

import django.db.models.deletion
from decimal import Decimal
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('solar_monitor', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='ModeloPlacaSolar',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fabricante', models.CharField(max_length=100, verbose_name='Fabricante')),
                ('modelo', models.CharField(max_length=150, verbose_name='Modelo')),
                ('potencia_pico_wp', models.DecimalField(decimal_places=2, help_text='Potência em condições padrão de teste', max_digits=7, verbose_name='Potência Pico (Wp)')),
                ('tensao_circuito_aberto_voc', models.DecimalField(decimal_places=2, max_digits=6, verbose_name='Tensão Circuito Aberto Voc (V)')),
                ('corrente_curto_circuito_isc', models.DecimalField(decimal_places=2, max_digits=6, verbose_name='Corrente Curto-Circuito Isc (A)')),
                ('tensao_maxima_potencia_vmp', models.DecimalField(decimal_places=2, help_text='Tensão no ponto de máxima potência', max_digits=6, verbose_name='Tensão Máxima Potência Vmp (V)')),
                ('corrente_maxima_potencia_imp', models.DecimalField(decimal_places=2, max_digits=6, verbose_name='Corrente Máxima Potência Imp (A)')),
                ('eficiencia_percent', models.DecimalField(decimal_places=2, help_text='Eficiência de conversão solar para elétrica', max_digits=5, verbose_name='Eficiência (%)')),
                ('tecnologia', models.CharField(choices=[('monocristalino', 'Monocristalino'), ('policristalino', 'Policristalino'), ('filme_fino', 'Filme Fino'), ('perc', 'PERC (Passivated Emitter Rear Cell)'), ('hjt', 'HJT (Heterojunction)'), ('topcon', 'TOPCon'), ('bifacial', 'Bifacial')], max_length=50, verbose_name='Tecnologia')),
                ('coef_temp_potencia_percent', models.DecimalField(decimal_places=3, default=Decimal('-0.400'), help_text='Perda de potência por °C acima de 25°C (geralmente negativo)', max_digits=5, verbose_name='Coef. Temperatura Potência (%/°C)')),
                ('coef_temp_tensao_percent', models.DecimalField(blank=True, decimal_places=3, max_digits=5, null=True, verbose_name='Coef. Temperatura Tensão (%/°C)')),
                ('coef_temp_corrente_percent', models.DecimalField(blank=True, decimal_places=3, max_digits=5, null=True, verbose_name='Coef. Temperatura Corrente (%/°C)')),
                ('comprimento_mm', models.IntegerField(verbose_name='Comprimento (mm)')),
                ('largura_mm', models.IntegerField(verbose_name='Largura (mm)')),
                ('espessura_mm', models.IntegerField(default=40, verbose_name='Espessura (mm)')),
                ('peso_kg', models.DecimalField(decimal_places=2, max_digits=6, verbose_name='Peso (kg)')),
                ('numero_celulas', models.IntegerField(help_text='Ex: 60, 72, 120, 144 células', verbose_name='Número de Células')),
                ('tolerancia_potencia_percent', models.DecimalField(decimal_places=2, default=Decimal('3.00'), max_digits=4, verbose_name='Tolerância de Potência (±%)')),
                ('temperatura_operacao_min_c', models.DecimalField(decimal_places=1, default=Decimal('-40.0'), max_digits=5, verbose_name='Temperatura Operação Mínima (°C)')),
                ('temperatura_operacao_max_c', models.DecimalField(decimal_places=1, default=Decimal('85.0'), max_digits=5, verbose_name='Temperatura Operação Máxima (°C)')),
                ('tensao_maxima_sistema_v', models.IntegerField(default=1000, help_text='Tensão máxima DC suportada', verbose_name='Tensão Máxima do Sistema (V)')),
                ('certificacoes', models.TextField(blank=True, help_text='Ex: INMETRO, IEC 61215, IEC 61730', verbose_name='Certificações')),
                ('anos_garantia_produto', models.IntegerField(default=10, verbose_name='Anos Garantia Produto')),
                ('anos_garantia_performance', models.IntegerField(default=25, verbose_name='Anos Garantia Performance')),
                ('garantia_performance_25anos_percent', models.DecimalField(decimal_places=2, default=Decimal('80.00'), help_text='% da potência original garantida após 25 anos', max_digits=5, verbose_name='Garantia Performance 25 anos (%)')),
                ('bifacial', models.BooleanField(default=False, help_text='Gera energia pelos dois lados', verbose_name='Bifacial')),
                ('bifacialidade_percent', models.DecimalField(blank=True, decimal_places=2, help_text='% de geração da face traseira em relação à frontal', max_digits=5, null=True, verbose_name='Bifacialidade (%)')),
                ('observacoes', models.TextField(blank=True, verbose_name='Observações')),
                ('ativo', models.BooleanField(default=True, verbose_name='Ativo')),
                ('criado_em', models.DateTimeField(auto_now_add=True)),
                ('atualizado_em', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Modelo de Placa Solar',
                'verbose_name_plural': 'Modelos de Placas Solares',
                'ordering': ['fabricante', 'modelo'],
            },
        ),
        migrations.RemoveField(
            model_name='usinasolar',
            name='api_endpoint',
        ),
        migrations.RemoveField(
            model_name='usinasolar',
            name='api_key',
        ),
        migrations.RemoveField(
            model_name='usinasolar',
            name='inversor_marca',
        ),
        migrations.RemoveField(
            model_name='usinasolar',
            name='inversor_modelo',
        ),
        migrations.AlterField(
            model_name='usinasolar',
            name='capacidade_kwp',
            field=models.DecimalField(decimal_places=2, help_text='Soma da potência de todas as placas instaladas', max_digits=10, verbose_name='Capacidade Instalada (kWp)'),
        ),
        migrations.CreateModel(
            name='Inversor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fabricante', models.CharField(max_length=100, verbose_name='Fabricante')),
                ('modelo', models.CharField(max_length=150, verbose_name='Modelo')),
                ('numero_serie', models.CharField(blank=True, max_length=200, verbose_name='Número de Série')),
                ('potencia_nominal_kw', models.DecimalField(decimal_places=2, help_text='Potência máxima de saída do inversor', max_digits=10, verbose_name='Potência Nominal (kW)')),
                ('potencia_maxima_dc_kw', models.DecimalField(decimal_places=2, help_text='Potência máxima que pode receber dos painéis', max_digits=10, verbose_name='Potência Máxima DC (kW)')),
                ('tensao_entrada_min_v', models.DecimalField(decimal_places=2, max_digits=7, verbose_name='Tensão de Entrada Mínima (V)')),
                ('tensao_entrada_max_v', models.DecimalField(decimal_places=2, max_digits=7, verbose_name='Tensão de Entrada Máxima (V)')),
                ('tensao_mppt_min_v', models.DecimalField(decimal_places=2, help_text='Faixa MPPT - Maximum Power Point Tracking', max_digits=7, verbose_name='Tensão MPPT Mínima (V)')),
                ('tensao_mppt_max_v', models.DecimalField(decimal_places=2, max_digits=7, verbose_name='Tensão MPPT Máxima (V)')),
                ('tensao_saida_v', models.DecimalField(decimal_places=2, default=Decimal('220.00'), help_text='Tensão AC de saída (220V, 380V, etc.)', max_digits=6, verbose_name='Tensão de Saída (V)')),
                ('corrente_entrada_max_a', models.DecimalField(decimal_places=2, max_digits=7, verbose_name='Corrente de Entrada Máxima (A)')),
                ('corrente_saida_max_a', models.DecimalField(decimal_places=2, max_digits=7, verbose_name='Corrente de Saída Máxima (A)')),
                ('eficiencia_maxima_percent', models.DecimalField(decimal_places=2, default=Decimal('97.00'), help_text='Eficiência de conversão DC para AC', max_digits=5, verbose_name='Eficiência Máxima (%)')),
                ('eficiencia_europeia_percent', models.DecimalField(blank=True, decimal_places=2, help_text='Média ponderada de eficiência', max_digits=5, null=True, verbose_name='Eficiência Europeia (%)')),
                ('numero_mppt', models.IntegerField(help_text='Rastreadores de ponto de máxima potência', verbose_name='Número de MPPTs')),
                ('strings_por_mppt', models.IntegerField(help_text='Quantas strings podem ser conectadas por MPPT', verbose_name='Strings por MPPT')),
                ('grau_protecao_ip', models.CharField(default='IP65', help_text="Ex: IP65 (proteção contra poeira e jatos d'água)", max_length=10, verbose_name='Grau de Proteção IP')),
                ('certificacoes', models.TextField(blank=True, help_text='Ex: INMETRO, IEC 62109, VDE, etc.', verbose_name='Certificações')),
                ('temperatura_operacao_min_c', models.DecimalField(decimal_places=1, default=Decimal('-25.0'), max_digits=5, verbose_name='Temperatura Operação Mínima (°C)')),
                ('temperatura_operacao_max_c', models.DecimalField(decimal_places=1, default=Decimal('60.0'), max_digits=5, verbose_name='Temperatura Operação Máxima (°C)')),
                ('altitude_maxima_m', models.IntegerField(default=2000, help_text='Altitude máxima de operação sem desrating', verbose_name='Altitude Máxima (m)')),
                ('tipo_comunicacao', models.CharField(blank=True, help_text='Ex: Wi-Fi, Ethernet, RS485, Modbus', max_length=100, verbose_name='Tipo de Comunicação')),
                ('api_endpoint', models.URLField(blank=True, help_text='URL base da API do fabricante', verbose_name='Endpoint da API')),
                ('api_key', models.CharField(blank=True, max_length=500, verbose_name='Chave da API')),
                ('data_fabricacao', models.DateField(blank=True, null=True, verbose_name='Data de Fabricação')),
                ('data_instalacao', models.DateField(blank=True, null=True, verbose_name='Data de Instalação')),
                ('anos_garantia', models.IntegerField(default=5, verbose_name='Anos de Garantia')),
                ('peso_kg', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True, verbose_name='Peso (kg)')),
                ('dimensoes', models.CharField(blank=True, max_length=100, verbose_name='Dimensões (LxAxP mm)')),
                ('observacoes', models.TextField(blank=True, verbose_name='Observações')),
                ('ativo', models.BooleanField(default=True, verbose_name='Ativo')),
                ('criado_em', models.DateTimeField(auto_now_add=True)),
                ('atualizado_em', models.DateTimeField(auto_now=True)),
                ('usina', models.ForeignKey(help_text='Usina à qual este inversor pertence', on_delete=django.db.models.deletion.CASCADE, related_name='inversores', to='solar_monitor.usinasolar', verbose_name='Usina')),
            ],
            options={
                'verbose_name': 'Inversor',
                'verbose_name_plural': 'Inversores',
                'ordering': ['fabricante', 'modelo'],
            },
        ),
        migrations.CreateModel(
            name='ConfiguracaoPlacasUsina',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantidade_placas', models.IntegerField(help_text='Número total de placas deste modelo', verbose_name='Quantidade de Placas')),
                ('quantidade_strings', models.IntegerField(help_text='Strings são conjuntos de placas em série', verbose_name='Número de Strings')),
                ('placas_por_string', models.IntegerField(help_text='Quantidade de placas conectadas em série em cada string', verbose_name='Placas por String')),
                ('orientacao_azimutal', models.DecimalField(decimal_places=2, help_text='0°=Norte, 90°=Leste, 180°=Sul, 270°=Oeste', max_digits=5, verbose_name='Orientação Azimutal (°)')),
                ('inclinacao_graus', models.DecimalField(decimal_places=2, help_text='Ângulo de inclinação dos painéis (0° horizontal, 90° vertical)', max_digits=4, verbose_name='Inclinação (°)')),
                ('tipo_instalacao', models.CharField(choices=[('telhado', 'Telhado'), ('solo', 'Solo (Ground Mount)'), ('carport', 'Carport'), ('fachada', 'Fachada'), ('tracker', 'Tracker (Seguidor Solar)')], default='telhado', max_length=50, verbose_name='Tipo de Instalação')),
                ('tem_rastreamento', models.BooleanField(default=False, help_text='Sistema de tracker que acompanha o movimento do sol', verbose_name='Tem Rastreamento Solar')),
                ('tipo_rastreamento', models.CharField(choices=[('nenhum', 'Nenhum'), ('eixo_unico_horizontal', 'Eixo Único Horizontal'), ('eixo_unico_vertical', 'Eixo Único Vertical'), ('dois_eixos', 'Dois Eixos')], default='nenhum', max_length=30, verbose_name='Tipo de Rastreamento')),
                ('mppt_utilizado', models.IntegerField(blank=True, help_text='Número do MPPT do inversor ao qual está conectado', null=True, verbose_name='MPPT Utilizado')),
                ('sombreamento_estimado_percent', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='% de perda estimada por sombreamento', max_digits=5, verbose_name='Sombreamento Estimado (%)')),
                ('data_instalacao', models.DateField(verbose_name='Data de Instalação')),
                ('ativa', models.BooleanField(default=True, verbose_name='Configuração Ativa')),
                ('observacoes', models.TextField(blank=True, verbose_name='Observações')),
                ('criado_em', models.DateTimeField(auto_now_add=True)),
                ('atualizado_em', models.DateTimeField(auto_now=True)),
                ('usina', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='configuracoes_placas', to='solar_monitor.usinasolar', verbose_name='Usina')),
                ('inversor', models.ForeignKey(blank=True, help_text='Inversor ao qual estas placas estão conectadas', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='configuracoes_placas', to='solar_monitor.inversor', verbose_name='Inversor Conectado')),
                ('modelo_placa', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='instalacoes', to='solar_monitor.modeloplacasolar', verbose_name='Modelo da Placa')),
            ],
            options={
                'verbose_name': 'Configuração de Placas',
                'verbose_name_plural': 'Configurações de Placas',
                'ordering': ['-data_instalacao'],
            },
        ),
    ]
